<script lang="ts">

  import { columns } from "./reports/[range]/columns";
  import DateTable from "$lib/components/Table/data-table.svelte";
   import { flip } from 'svelte/animate';
  import { quintOut } from 'svelte/easing';


  let { data } = $props();

  /* size tokens */
  const svg = 'w-32 h-32 mb-4 drop-shadow-lg';
  const span = 'font-extrabold text-4xl tracking-tight';

  let plural = $state((n: number, w: string) => `${n} ${w}${n === 1 ? '' : 's'}`);

</script>

<svelte:head>
  <title>Dashboard</title>
</svelte:head>

<section
  class="bg-linear-to-br from-white via-secondary to-white dark:from-black dark:via-secondary dark:to-black p-4 md:p-8"
>
  <h1
    class="mb-8 bg-gradient-to-r from-fuchsia-400 to-cyan-400 bg-clip-text text-center text-4xl font-extrabold text-transparent drop-shadow-lg"
  >
    Dashboard
  </h1>

  <!-- KPI row -->
  <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-2">
    <!-- Appointments card -->
    <div
      class="group relative overflow-hidden rounded-2xl bg-white/5 p-6 backdrop-blur-xl transition-shadow hover:shadow-2xl hover:shadow-fuchsia-500/40"
    >
      <div
        class="absolute -inset-2 -z-10 bg-gradient-to-br from-fuchsia-500 to-purple-600 opacity-0 blur-xl transition-opacity group-hover:opacity-75"
      ></div>
      <p class="text-sm uppercase tracking-widest text-purple-300">
        Today’s appointments
      </p>
      <p
        class="mt-2 text-5xl font-bold text-white drop-shadow-md"
        
      >
        {data.nofAppointments}
      </p>
      <p class="mt-1 text-purple-200">
        {plural(data.nofAppointments, 'appointment')}
      </p>
    </div>

    <!-- Re-order products -->
    <div
      class="group relative overflow-hidden rounded-2xl bg-white/5 p-6 backdrop-blur-xl transition-shadow hover:shadow-2xl hover:shadow-amber-500/40"
    >
      <div
        class="absolute -inset-2 -z-10 bg-gradient-to-br from-amber-400 to-orange-500 opacity-0 blur-xl transition-opacity group-hover:opacity-75"
      ></div>
      <p class="text-sm uppercase tracking-widest text-amber-200">
        Products to re-order
      </p>
      <p
        class="mt-2 text-5xl font-bold text-white drop-shadow-md"
      >
        {data.reorderProducts.length}
      </p>
      <ul class="mt-3 space-y-1 text-amber-100">
        {#each data.reorderProducts.slice(0, 3) as item}
          <li class="flex items-center gap-2">
            <span class="h-2 w-2 rounded-full bg-amber-400" ></span>
            {item.name}
          </li>
        {/each}
        {#if data.reorderProducts.length > 3}
          <li class="text-xs text-amber-200">
            …and {data.reorderProducts.length - 3} more
          </li>
        {/if}
      </ul>
    </div>

    <!-- Re-order supplies -->
    <div
      class="group relative overflow-hidden rounded-2xl bg-white/5 p-6 backdrop-blur-xl transition-shadow hover:shadow-2xl hover:shadow-teal-500/40"
    >
      <div
        class="absolute -inset-2 -z-10 bg-gradient-to-br from-teal-400 to-cyan-500 opacity-0 blur-xl transition-opacity group-hover:opacity-75"
      ></div>
      <p class="text-sm uppercase tracking-widest text-teal-200">
        Supplies to re-order
      </p>
      <p
        class="mt-2 text-5xl font-bold text-white drop-shadow-md"
      >
        {data.reorderSupplies.length}
      </p>
      <ul class="mt-3 space-y-1 text-teal-100">
        {#each data.reorderSupplies.slice(0, 3) as item}
          <li class="flex items-center gap-2">
            <span class="h-2 w-2 rounded-full bg-teal-400" > </span>
            {item.name}
          </li>
        {/each}
        {#if data.reorderSupplies.length > 3}
          <li class="text-xs text-teal-200">
            …and {data.reorderSupplies.length - 3} more
          </li>
        {/if}
      </ul>
    </div>
  </div>

  <!-- Report table card -->
  <div
    class="group relative mt-8 overflow-hidden rounded-2xl bg-white/5 p-6 backdrop-blur-xl transition-shadow hover:shadow-2xl hover:shadow-indigo-500/40"
  >
    <div
      class="absolute -inset-2 -z-10 bg-gradient-to-br from-indigo-500 to-blue-600 opacity-0 blur-xl transition-opacity group-hover:opacity-75"
    ></div>
    <p class="mb-4 text-sm uppercase tracking-widest text-indigo-200">
      Today’s report
    </p>

    <div class="min-h-[12rem]">

       <DateTable data={data.todayReport} {columns} />
    </div>
  </div>
</section>

<!-- quick custom keyframe -->
<style>
  @keyframes shimmer {
    0%   { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  .shimmer {
    background-size: 200% 100%;
    animation: shimmer 2.5s infinite linear;
  }
  .card {
    transform-style: preserve-3d;
    transition: transform .35s ease, box-shadow .35s ease;
  }
  .card:hover {
    transform: perspective(1000px) rotateX(8deg) rotateY(-4deg) scale(1.08);
  }

  @keyframes sparkle {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 0.4;
    }
    50% {
      transform: translate(20px, -40px) scale(1.3);
      opacity: 0.1;
    }
    100% {
      transform: translate(-20px, 40px) scale(1);
      opacity: 0.4;
    }
  }
  section::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    background: radial-gradient(circle at 20% 20%, #f472b6 0%, transparent 25%),
      radial-gradient(circle at 80% 70%, #22d3ee 0%, transparent 25%);
    animation: sparkle 20s ease-in-out infinite alternate;
  }

  
</style>
<!-- <svelte:head>
  <title>Dashboard</title>
</svelte:head> -->
<!-- <div class="flex flex-col justify-center items-center lg:w-6xl w-[95%]">
<div class="grid grid-cols-1 md:grid-cols-2  lg:grid-cols-2 gap-10 mt-12 max-x-6xl px-6 w-full mx-auto align-middle justify-center items-center">
  <a href="/dashboard/products"
     class="card rounded-3xl shadow-2xl p-10 bg-gradient-to-br from-fuchsia-500 via-pink-500 to-rose-500 text-white flex flex-col items-center justify-center relative overflow-hidden">
    <div class="absolute inset-0 shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
    <svg class={svg} fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M3 7h18M3 12h18M3 17h18"/>
    </svg>
    <span class={span}>Products</span>
  </a>

  <a href="/dashboard/appointments"
     class="card rounded-3xl shadow-2xl p-10 bg-gradient-to-br from-emerald-400 via-teal-400 to-cyan-500 text-white flex flex-col items-center justify-center relative overflow-hidden">
    <div class="absolute inset-0 shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
    <svg class={svg} fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
    </svg>
    <span class={span}>Appointments</span>
  </a>

  <a href="/dashboard/supplies"
     class="card rounded-3xl shadow-2xl p-10 bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 text-white flex flex-col items-center justify-center relative overflow-hidden">
    <div class="absolute inset-0 shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
    <svg class={svg} fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M20 13V7a2 2 0 00-2-2H6a2 2 0 00-2 2v6m16 0v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-6m16 0H4"/>
    </svg>
    <span class={span}>Supplies</span>
  </a>

  <a href="/dashboard/customers"
     class="card rounded-3xl shadow-2xl p-10 bg-gradient-to-br from-sky-400 via-indigo-500 to-purple-600 text-white flex flex-col items-center justify-center relative overflow-hidden">
    <div class="absolute inset-0 shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
    <svg class={svg} fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M17 20h5v-2a4 4 0 00-3-3.87M9 20h6M3 20h5v-2a4 4 0 013-3.87M16 7a4 4 0 11-8 0 4 4 0 018 0z"/>
    </svg>
    <span class={span}>Customers</span>
  </a>
</div>
</div> -->

